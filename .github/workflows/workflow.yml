name: Swift

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  test:
    name: Test
    runs-on: macOS-latest
    strategy:
        matrix:
          destination: ['platform=iOS Simulator,OS=12.2,name=iPhone X', 'platform=tvOS Simulator,OS=12.2,name=Apple TV 4K']
    steps:
      - name: Checkout
        uses: actions/checkout@master

      - name: Bundle Install
        run: bundle install

    - name: Start xcodebuild test
      run: xcodebuild clean test -project Workflow-iOS.xcodeproj -scheme Workflow-iOS -destination "platform=iOS Simulator,name=iPhone 11 Pro"
